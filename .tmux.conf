set-option -g default-command bash

# initial setup
set -g status-keys vi

# use UTF8
set -g utf8
set-window-option -g utf8 on

# remap prefix from 'C-b' to 'C-a'
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# split horizontal panes using pipe or backslash
bind | split-window -h
bind \ split-window -h

# split vertical panes using underscore or dash
bind _ split-window -v
bind - split-window -v
unbind '"'

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Mouse mode for those emergencies...
set -g mouse on

# ----------------------
# set some pretty colors
# ----------------------
# set pane colors - highlight the active pane
set-option -g pane-border-fg colour235 #base02
set-option -g pane-active-border-fg cyan

# colorize messages in the command line
set-option -g message-bg black #base02
set-option -g message-fg yellow #orange

# switch panes without using prefix
bind -n M-h select-pane -L
bind -n M-l select-pane -R
bind -n M-k select-pane -U
bind -n M-j select-pane -D

# Fast toggle between last window (normally prefix-l)
bind ^space last-window

# set srollback history to 10000 (10k)
set -g history-limit 10000

# make tmux display things in 256 colors
set -g default-terminal "screen-256color"

bind r source-file ~/.tmux.conf \; display "Reloaded!"

 # shorten command delay
set -sg escape-time 1

# ----------------------
# Status Bar
# -----------------------
set-option -g status on                # turn the status bar on
set -g status-utf8 on                  # set utf-8 for the status bar
set -g status-interval 1               # set update frequencey (default 15 seconds)
set -g status-justify centre           # center window list for clarity

# set color for status bar
set-option -g status-bg colour235 #base02
set-option -g status-fg yellow #yellow
set-option -g status-attr bright

# highlight active window tab in status bar
set-window-option -g window-status-current-bg yellow
set-window-option -g window-status-current-fg colour0 #black

# move status bar to the top
set-option -g status-position top

# clock
set-window-option -g clock-mode-colour colour76 #green

# show session name, window & pane number, date and time on right side of
# status bar
set -g status-left-length 40
set -g status-right-length 50
set -g status-right "#[fg=cyan]$USER@#h #[fg=yellow] %m-%d-%y #[fg=green] #(date | awk '{print $4}') "

# use vim keybindings
setw -g mode-keys vi

bind-key 'P' paste-buffer
bind-key -t vi-copy 'v' begin-selection
bind-key -t vi-copy 'y' copy-selection
bind-key -t vi-copy 'V' rectangle-toggle


# show git in status bar
TMUX_GITBAR_DIR="$HOME/.tmux-gitbar"
source-file "$HOME/.tmux-gitbar/tmux-gitbar.tmux"

set -g @yank_selection 'primary'




# Smart pane switching with awareness of Vim splits.
# See: https://github.com/christoomey/vim-tmux-navigator
is_vim="ps -o state= -o comm= -t '#{pane_tty}' \
    | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"
bind-key -n C-h if-shell "$is_vim" "send-keys C-h"  "select-pane -L"
bind-key -n C-j if-shell "$is_vim" "send-keys C-j"  "select-pane -D"
bind-key -n C-k if-shell "$is_vim" "send-keys C-k"  "select-pane -U"
bind-key -n C-l if-shell "$is_vim" "send-keys C-l"  "select-pane -R"
bind-key -n C-\ if-shell "$is_vim" "send-keys C-\\" "select-pane -l"

# Restore clear screen
bind C-l send-keys 'C-l'

# Plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-yank'

#Install 	-- prefix + I
#Update 	-- prefix + u
#Uninstall 	-- prefeix + alt + u

run-shell '~/.tmux/plugins/tmux-yank/yank.tmux'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
